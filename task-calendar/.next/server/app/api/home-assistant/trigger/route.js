"use strict";(()=>{var e={};e.id=604,e.ids=[604],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7451:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>d,patchFetch:()=>l,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var r={};s.r(r),s.d(r,{POST:()=>u});var a=s(3277),o=s(5265),i=s(5356),n=s(7076);async function u(e){try{let{date:t}=await e.json(),s=process.env.HOME_ASSISTANT_URL||"http://supervisor/core",r=process.env.HOME_ASSISTANT_TOKEN||process.env.SUPERVISOR_TOKEN;if(!r)return n.NextResponse.json({error:"Home Assistant token missing",message:"SUPERVISOR_TOKEN not available"},{status:500});let a=await fetch(`${s}/api/services/automation/trigger`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({entity_id:"automation.all_tasks_complete",variables:{date:t}})});if(a.ok)return n.NextResponse.json({success:!0,message:"Home Assistant automation triggered successfully"});{let e=await a.text();return n.NextResponse.json({error:"Failed to trigger Home Assistant",details:e},{status:a.status})}}catch(e){return console.error("Error triggering Home Assistant:",e),n.NextResponse.json({error:"Failed to trigger Home Assistant",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/home-assistant/trigger/route",pathname:"/api/home-assistant/trigger",filename:"route",bundlePath:"app/api/home-assistant/trigger/route"},resolvedPagePath:"/Users/john/chore_tracking/task-calendar/app/api/home-assistant/trigger/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:c,serverHooks:m}=p,d="/api/home-assistant/trigger/route";function l(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[942,786],()=>s(7451));module.exports=r})();