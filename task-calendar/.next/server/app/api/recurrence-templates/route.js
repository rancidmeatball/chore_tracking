"use strict";(()=>{var e={};e.id=481,e.ids=[481],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9588:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var n={};t.r(n),t.d(n,{GET:()=>c,POST:()=>l});var a=t(3277),s=t(5265),o=t(5356),u=t(7076),i=t(9136);async function c(){try{let e=(await i._.recurrenceTemplate.findMany({include:{child:{select:{id:!0,name:!0}}},orderBy:{name:"asc"}})).map(e=>({...e,daysOfWeek:e.daysOfWeek?JSON.parse(e.daysOfWeek):null}));return u.NextResponse.json(e)}catch(e){return console.error("Error fetching recurrence templates:",e),u.NextResponse.json({error:"Failed to fetch recurrence templates"},{status:500})}}async function l(e){try{let{name:r,description:t,frequency:n,daysOfWeek:a,dayOfMonth:s,dueDate:o,childId:c}=await e.json();if(!r||!n||!c)return u.NextResponse.json({error:"Name, frequency, and child are required"},{status:400});if("weekly"===n&&(!a||0===a.length))return u.NextResponse.json({error:"At least one day of week is required for weekly frequency"},{status:400});if("monthly"===n&&(void 0===s||s<1||s>31))return u.NextResponse.json({error:"dayOfMonth is required for monthly frequency (must be 1-31)"},{status:400});if("one-time"===n&&!o)return u.NextResponse.json({error:"dueDate is required for one-time frequency"},{status:400});let l=await i._.recurrenceTemplate.create({data:{name:r,description:t||null,frequency:n,daysOfWeek:"weekly"===n?JSON.stringify(a):null,dayOfMonth:"monthly"===n?s:null,dueDate:"one-time"===n&&o?new Date(o):null,childId:c||null},include:{child:{select:{id:!0,name:!0}}}}),d={...l,daysOfWeek:l.daysOfWeek?JSON.parse(l.daysOfWeek):null};return u.NextResponse.json(d,{status:201})}catch(e){return console.error("Error creating recurrence template:",e),u.NextResponse.json({error:"Failed to create recurrence template"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/recurrence-templates/route",pathname:"/api/recurrence-templates",filename:"route",bundlePath:"app/api/recurrence-templates/route"},resolvedPagePath:"/Users/john/chore_tracking/task-calendar/app/api/recurrence-templates/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:f}=d,y="/api/recurrence-templates/route";function h(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},9136:(e,r,t)=>{t.d(r,{_:()=>a});let n=require("@prisma/client"),a=globalThis.prisma??new n.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[942,786],()=>t(9588));module.exports=n})();